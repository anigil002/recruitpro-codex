<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RecruitPro Console</title>
    <script defer src="./scripts/init-backend.js"></script>
    <style>
      :root {
        color-scheme: dark light;
        font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        --bg: linear-gradient(160deg, #020617 0%, #0f172a 45%, #111827 100%);
        --surface: rgba(15, 23, 42, 0.9);
        --surface-soft: rgba(15, 23, 42, 0.65);
        --border: rgba(148, 163, 184, 0.15);
        --border-strong: rgba(148, 163, 184, 0.35);
        --text: #e2e8f0;
        --text-muted: #94a3b8;
        --accent: #3b82f6;
        --accent-soft: rgba(59, 130, 246, 0.12);
        --accent-strong: rgba(59, 130, 246, 0.4);
        --success: #22c55e;
        --warning: #f59e0b;
        --danger: #ef4444;
        background-color: #020617;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        background: var(--bg);
        color: var(--text);
        display: flex;
        justify-content: center;
        align-items: stretch;
        padding: 32px 20px;
      }

      a {
        color: inherit;
      }

      h1,
      h2,
      h3,
      h4 {
        margin: 0;
        font-weight: 600;
      }

      p {
        margin: 0;
      }

      button,
      input,
      select,
      textarea {
        font: inherit;
      }

      .app-shell {
        width: min(1400px, 100%);
        display: flex;
        flex-direction: column;
        gap: 32px;
      }

      .glass-card {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: 18px;
        box-shadow: 0 35px 65px -40px rgba(15, 118, 255, 0.65);
        backdrop-filter: blur(14px);
      }

      /* Login screen */
      .login-screen {
        flex: 1;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .login-card {
        width: min(460px, 100%);
        padding: 36px;
        display: flex;
        flex-direction: column;
        gap: 24px;
      }

      .login-card header {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .login-card header span {
        color: var(--text-muted);
      }

      .login-card form {
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .field {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .field label {
        font-size: 0.95rem;
        color: var(--text-muted);
      }

      .input {
        padding: 12px 14px;
        border-radius: 12px;
        border: 1px solid var(--border);
        background: rgba(15, 23, 42, 0.55);
        color: var(--text);
      }

      .primary-btn {
        align-self: flex-start;
        border: none;
        border-radius: 999px;
        padding: 12px 24px;
        background: linear-gradient(120deg, #2563eb, #38bdf8);
        color: #0b1220;
        font-weight: 600;
        cursor: pointer;
        transition: transform 120ms ease, box-shadow 120ms ease;
      }

      .primary-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 18px 45px -28px rgba(56, 189, 248, 0.9);
      }

      .primary-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
      }

      /* Authenticated layout */
      .app-layout {
        display: none;
        min-height: 720px;
      }

      .app-layout[data-state="visible"] {
        display: grid;
        grid-template-columns: 270px minmax(0, 1fr);
        gap: 24px;
      }

      .sidebar {
        position: sticky;
        top: 0;
        align-self: start;
        display: flex;
        flex-direction: column;
        height: 100%;
        padding: 28px 24px;
        gap: 32px;
      }

      .brand {
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 700;
        letter-spacing: 0.03em;
      }

      .brand span:first-child {
        width: 40px;
        height: 40px;
        display: grid;
        place-items: center;
        border-radius: 12px;
        background: var(--accent);
        color: #0b1220;
        font-weight: 700;
      }

      .nav {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .nav-button {
        border: none;
        background: transparent;
        color: var(--text-muted);
        padding: 12px 14px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        gap: 12px;
        justify-content: flex-start;
        cursor: pointer;
        font-weight: 500;
        transition: background 0.2s ease, color 0.2s ease, transform 0.2s ease;
      }

      .nav-button::before {
        content: "";
        width: 8px;
        height: 8px;
        border-radius: 999px;
        background: var(--border);
        transition: background 0.2s ease;
      }

      .nav-button:hover {
        background: rgba(59, 130, 246, 0.16);
        color: var(--text);
      }

      .nav-button.is-active {
        background: rgba(59, 130, 246, 0.25);
        color: var(--text);
        transform: translateX(4px);
      }

      .nav-button.is-active::before {
        background: var(--accent);
      }

      .sidebar-footer {
        margin-top: auto;
        display: flex;
        flex-direction: column;
        gap: 12px;
        font-size: 0.85rem;
        color: var(--text-muted);
      }

      .logout-btn {
        border: 1px solid var(--border);
        border-radius: 999px;
        padding: 10px 18px;
        color: inherit;
        background: transparent;
        cursor: pointer;
        transition: background 0.2s ease, border-color 0.2s ease;
      }

      .logout-btn:hover {
        background: rgba(148, 163, 184, 0.15);
        border-color: var(--border-strong);
      }

      .content-surface {
        padding: 28px;
        display: flex;
        flex-direction: column;
        gap: 24px;
      }

      .topbar {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        align-items: center;
        gap: 16px;
      }

      .topbar h1 {
        font-size: 1.6rem;
        font-weight: 600;
      }

      .topbar-actions {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .search-input {
        padding: 10px 16px;
        border-radius: 999px;
        border: 1px solid var(--border);
        background: rgba(2, 6, 23, 0.55);
        color: var(--text);
        min-width: 220px;
      }

      .chip {
        padding: 6px 12px;
        border-radius: 999px;
        background: rgba(59, 130, 246, 0.14);
        border: 1px solid rgba(59, 130, 246, 0.45);
        color: var(--text);
        font-size: 0.8rem;
        font-weight: 600;
      }

      .view {
        display: none;
        flex-direction: column;
        gap: 24px;
      }

      .view[data-state="active"] {
        display: flex;
      }

      .grid {
        display: grid;
        gap: 18px;
      }

      .grid.two {
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      }

      .grid.three {
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      }

      .stat-card {
        padding: 20px;
        border-radius: 16px;
        border: 1px solid var(--border);
        background: var(--surface-soft);
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .stat-card .label {
        font-size: 0.85rem;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.04em;
      }

      .stat-card strong {
        font-size: 2rem;
      }

      .stat-card footer {
        font-size: 0.85rem;
        color: var(--text-muted);
      }

      .panel {
        padding: 24px;
        border-radius: 18px;
        border: 1px solid var(--border);
        background: var(--surface-soft);
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .panel header {
        display: flex;
        justify-content: space-between;
        gap: 12px;
        align-items: center;
      }

      .panel header h3 {
        font-size: 1.1rem;
      }

      .panel header span {
        color: var(--text-muted);
        font-size: 0.9rem;
      }

      .timeline {
        list-style: none;
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        gap: 18px;
      }

      .timeline-item {
        display: grid;
        grid-template-columns: auto 1fr;
        gap: 16px;
        align-items: start;
      }

      .timeline-item::before {
        content: "";
        width: 12px;
        height: 12px;
        border-radius: 999px;
        background: var(--accent);
        margin-top: 6px;
        box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.25);
      }

      .timeline-item strong {
        display: block;
        font-weight: 600;
        margin-bottom: 4px;
      }

      .timeline-item span {
        color: var(--text-muted);
        font-size: 0.85rem;
      }

      .table {
        width: 100%;
        border-collapse: collapse;
      }

      .table thead {
        color: var(--text-muted);
        font-size: 0.8rem;
        text-transform: uppercase;
        letter-spacing: 0.04em;
      }

      .table th,
      .table td {
        padding: 14px 12px;
        border-bottom: 1px solid rgba(148, 163, 184, 0.08);
      }

      .table tbody tr:hover {
        background: rgba(148, 163, 184, 0.08);
      }

      .badge {
        border-radius: 999px;
        padding: 4px 10px;
        font-size: 0.75rem;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        border: 1px solid transparent;
      }

      .badge.success {
        background: rgba(34, 197, 94, 0.15);
        border-color: rgba(34, 197, 94, 0.35);
        color: var(--success);
      }

      .badge.warning {
        background: rgba(245, 158, 11, 0.15);
        border-color: rgba(245, 158, 11, 0.35);
        color: var(--warning);
      }

      .badge.info {
        background: rgba(59, 130, 246, 0.15);
        border-color: rgba(59, 130, 246, 0.35);
        color: var(--accent);
      }

      .quick-actions {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
      }

      .quick-actions a {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 10px 16px;
        border-radius: 999px;
        border: 1px solid var(--border);
        background: rgba(148, 163, 184, 0.08);
        color: inherit;
        text-decoration: none;
        font-size: 0.9rem;
        transition: transform 0.2s ease, border-color 0.2s ease;
      }

      .quick-actions a:hover {
        transform: translateY(-1px);
        border-color: var(--accent-strong);
      }

      @media (max-width: 1100px) {
        body {
          padding: 24px 12px;
        }

        .app-layout[data-state="visible"] {
          grid-template-columns: 1fr;
        }

        .sidebar {
          position: relative;
          flex-direction: row;
          flex-wrap: wrap;
          justify-content: space-between;
          gap: 16px;
        }

        .nav {
          flex-direction: row;
          flex-wrap: wrap;
          gap: 10px;
        }

        .nav-button {
          padding: 10px 14px;
        }

        .nav-button::before {
          display: none;
        }

        .sidebar-footer {
          width: 100%;
          flex-direction: row;
          justify-content: space-between;
          align-items: center;
        }
      }

      @media (max-width: 640px) {
        body {
          padding: 16px 10px;
        }

        .login-card {
          padding: 28px;
        }

        .content-surface {
          padding: 22px;
        }

        .search-input {
          min-width: 0;
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <div class="app-shell">
      <section class="login-screen" id="loginScreen">
        <article class="glass-card login-card">
          <header>
            <div class="chip">Private Console</div>
            <h1>Welcome back to RecruitPro</h1>
            <span>Sign in to review pipelines, manage candidates and launch AI sourcing campaigns.</span>
          </header>
          <form id="loginForm" novalidate>
            <div class="field">
              <label for="email">Work Email</label>
              <input class="input" type="email" id="email" name="email" placeholder="you@company.com" required />
            </div>
            <div class="field">
              <label for="password">Password</label>
              <input class="input" type="password" id="password" name="password" placeholder="••••••••" required />
            </div>
            <button class="primary-btn" type="submit">Enter dashboard</button>
          </form>
        </article>
      </section>

      <section class="app-layout" id="appLayout">
        <aside class="glass-card sidebar">
          <div class="brand">
            <span>RP</span>
            <div>
              RecruitPro
              <div style="font-size: 0.8rem; color: var(--text-muted); font-weight: 400">Talent OS</div>
            </div>
          </div>
          <nav class="nav" aria-label="Primary navigation">
            <button class="nav-button is-active" data-view-target="dashboard">Dashboard</button>
            <button class="nav-button" data-view-target="projects">Projects</button>
            <button class="nav-button" data-view-target="candidates">Candidates</button>
            <button class="nav-button" data-view-target="positions">Positions</button>
            <button class="nav-button" data-view-target="ai-sourcing">AI Sourcing</button>
            <button class="nav-button" data-view-target="settings">Settings</button>
          </nav>
          <div class="sidebar-footer">
            <div>
              <strong>Ops Status</strong>
              <div>Backend: <span id="backendStatus">Connecting…</span></div>
            </div>
            <button class="logout-btn" type="button" id="logoutButton">Log out</button>
          </div>
        </aside>

        <main class="glass-card content-surface" aria-live="polite">
          <header class="topbar">
            <div>
              <h1 id="viewTitle">Dashboard overview</h1>
              <p style="color: var(--text-muted); font-size: 0.95rem">Track progress across hiring funnels and coordinate teams effortlessly.</p>
            </div>
            <div class="topbar-actions">
              <input class="search-input" type="search" placeholder="Search projects, candidates, positions…" aria-label="Search" />
              <div class="chip">Today <span id="todayDate"></span></div>
            </div>
          </header>

          <section class="view" data-view="dashboard" data-state="active">
            <div class="grid three">
              <article class="stat-card">
                <span class="label">Active Projects</span>
                <strong>12</strong>
                <footer>4 launching this week</footer>
              </article>
              <article class="stat-card">
                <span class="label">Candidates in review</span>
                <strong>87</strong>
                <footer>+18 since yesterday</footer>
              </article>
              <article class="stat-card">
                <span class="label">AI outreach replies</span>
                <strong>32</strong>
                <footer class="badge success">78% response rate</footer>
              </article>
            </div>

            <article class="panel">
              <header>
                <h3>Recent activity</h3>
                <span>Last refreshed moments ago</span>
              </header>
              <ul class="timeline" id="recentActivity">
                <li class="timeline-item">
                  <div>
                    <strong>Offer accepted!</strong>
                    <span>Aria Chen signed the Staff Backend Engineer offer for Atlas CRM.</span>
                  </div>
                  <span>5m ago</span>
                </li>
                <li class="timeline-item">
                  <div>
                    <strong>New campaign launched</strong>
                    <span>AI sourcing activated for "Enterprise AE - West Coast" with 150 leads queued.</span>
                  </div>
                  <span>22m ago</span>
                </li>
                <li class="timeline-item">
                  <div>
                    <strong>Candidate advanced</strong>
                    <span>Juan Rivera moved to onsite panel for "Head of Product Design".</span>
                  </div>
                  <span>1h ago</span>
                </li>
                <li class="timeline-item">
                  <div>
                    <strong>New position request</strong>
                    <span>FinOps requested support for a Senior Payroll Analyst search.</span>
                  </div>
                  <span>3h ago</span>
                </li>
              </ul>
            </article>
          </section>

          <section class="view" data-view="projects">
            <article class="panel">
              <header>
                <h3>Project portfolio</h3>
                <span>Monitoring velocity, owners and stage health</span>
              </header>
              <div class="grid two">
                <article class="stat-card">
                  <span class="label">Projects on track</span>
                  <strong>9</strong>
                  <footer class="badge success">75% hitting weekly goals</footer>
                </article>
                <article class="stat-card">
                  <span class="label">Need attention</span>
                  <strong>3</strong>
                  <footer class="badge warning">Blocked on hiring manager feedback</footer>
                </article>
              </div>
              <div class="panel" style="background: rgba(15, 23, 42, 0.45); gap: 0">
                <table class="table" aria-label="Project list">
                  <thead>
                    <tr>
                      <th>Project</th>
                      <th>Owner</th>
                      <th>Stage</th>
                      <th>Pipeline health</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Atlas CRM - Staff Backend Engineer</td>
                      <td>Jordan Miles</td>
                      <td><span class="badge info">Final interviews</span></td>
                      <td>8 ready for onsite</td>
                    </tr>
                    <tr>
                      <td>NovaPay - Lead iOS Engineer</td>
                      <td>Sasha Patel</td>
                      <td><span class="badge warning">Sourcing</span></td>
                      <td>Requires design partnership</td>
                    </tr>
                    <tr>
                      <td>Orbit Analytics - Product Marketing Lead</td>
                      <td>Cam Ramirez</td>
                      <td><span class="badge success">Offer</span></td>
                      <td>Offer drafting with hiring manager</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="quick-actions">
                <a href="./project_page.html">Open project workspace</a>
                <a href="./project_positions.html">Review requisitions</a>
              </div>
            </article>
          </section>

          <section class="view" data-view="candidates">
            <article class="panel">
              <header>
                <h3>Candidate pipelines</h3>
                <span>Across all managed projects</span>
              </header>
              <div class="grid two">
                <article class="stat-card">
                  <span class="label">Interviews this week</span>
                  <strong>41</strong>
                  <footer class="badge info">12 scheduled for tomorrow</footer>
                </article>
                <article class="stat-card">
                  <span class="label">Pending feedback</span>
                  <strong>7</strong>
                  <footer class="badge warning">Follow up by EOD</footer>
                </article>
              </div>
              <div class="panel" style="background: rgba(15, 23, 42, 0.45); gap: 0">
                <table class="table" aria-label="Candidate progress">
                  <thead>
                    <tr>
                      <th>Candidate</th>
                      <th>Role</th>
                      <th>Status</th>
                      <th>Next step</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Aria Chen</td>
                      <td>Staff Backend Engineer</td>
                      <td><span class="badge success">Offer</span></td>
                      <td>Comp package review</td>
                    </tr>
                    <tr>
                      <td>Devin Blake</td>
                      <td>Head of Product Design</td>
                      <td><span class="badge info">Onsite</span></td>
                      <td>Panel interview recap</td>
                    </tr>
                    <tr>
                      <td>Nia Roberts</td>
                      <td>Enterprise AE</td>
                      <td><span class="badge warning">Manager review</span></td>
                      <td>Await hiring manager notes</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="quick-actions">
                <a href="./candidate_profile.html">Open candidate profile</a>
              </div>
            </article>
          </section>

          <section class="view" data-view="positions">
            <article class="panel">
              <header>
                <h3>Open positions</h3>
                <span>Prioritize upcoming requisitions</span>
              </header>
              <div class="grid two">
                <article class="stat-card">
                  <span class="label">Open requisitions</span>
                  <strong>18</strong>
                  <footer class="badge info">6 forecast to close in 30 days</footer>
                </article>
                <article class="stat-card">
                  <span class="label">New requests</span>
                  <strong>4</strong>
                  <footer class="badge warning">Awaiting scoping call</footer>
                </article>
              </div>
              <div class="panel" style="background: rgba(15, 23, 42, 0.45); gap: 0">
                <table class="table" aria-label="Positions list">
                  <thead>
                    <tr>
                      <th>Position</th>
                      <th>Department</th>
                      <th>Stage</th>
                      <th>Target start</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Senior Payroll Analyst</td>
                      <td>Finance</td>
                      <td><span class="badge warning">Intake</span></td>
                      <td>July 15</td>
                    </tr>
                    <tr>
                      <td>Director of Customer Success</td>
                      <td>Operations</td>
                      <td><span class="badge info">Interviewing</span></td>
                      <td>August 1</td>
                    </tr>
                    <tr>
                      <td>Platform Security Engineer</td>
                      <td>Engineering</td>
                      <td><span class="badge success">Offer</span></td>
                      <td>June 24</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="quick-actions">
                <a href="./project_positions.html">Manage positions</a>
              </div>
            </article>
          </section>

          <section class="view" data-view="ai-sourcing">
            <article class="panel">
              <header>
                <h3>AI sourcing control center</h3>
                <span>Monitor campaigns and automation efficiency</span>
              </header>
              <div class="grid three">
                <article class="stat-card">
                  <span class="label">Active campaigns</span>
                  <strong>6</strong>
                  <footer class="badge info">3 auto-enrich enabled</footer>
                </article>
                <article class="stat-card">
                  <span class="label">Qualified leads</span>
                  <strong>214</strong>
                  <footer>Goal: 250 this week</footer>
                </article>
                <article class="stat-card">
                  <span class="label">Replies</span>
                  <strong>32</strong>
                  <footer class="badge success">High intent: 14</footer>
                </article>
              </div>
              <div class="panel" style="background: rgba(15, 23, 42, 0.45); gap: 12px">
                <table class="table" aria-label="AI campaigns">
                  <thead>
                    <tr>
                      <th>Campaign</th>
                      <th>Target</th>
                      <th>Stage</th>
                      <th>Performance</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Enterprise AE - West Coast</td>
                      <td>Sales</td>
                      <td><span class="badge info">Running</span></td>
                      <td>150 leads • 42% reply</td>
                    </tr>
                    <tr>
                      <td>Senior Data Scientist - ML Ops</td>
                      <td>Engineering</td>
                      <td><span class="badge warning">Paused</span></td>
                      <td>Review outreach copy</td>
                    </tr>
                    <tr>
                      <td>Lifecycle Marketing Manager</td>
                      <td>Marketing</td>
                      <td><span class="badge success">Completed</span></td>
                      <td>18 qualified • 5 onsite</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="quick-actions">
                <a href="./ai_sourcing_overview.html">Launch sourcing overview</a>
              </div>
            </article>
          </section>

          <section class="view" data-view="settings">
            <article class="panel">
              <header>
                <h3>Workspace preferences</h3>
                <span>Tailor RecruitPro to your hiring rituals</span>
              </header>
              <div class="grid two">
                <article class="stat-card">
                  <span class="label">Notification digest</span>
                  <strong>Daily 7:30am</strong>
                  <footer>Configure alerts for hiring managers and recruiters.</footer>
                </article>
                <article class="stat-card">
                  <span class="label">Data sync</span>
                  <strong>ATS + CRM</strong>
                  <footer class="badge success">Live</footer>
                </article>
              </div>
              <div class="panel" style="background: rgba(15, 23, 42, 0.45); gap: 20px">
                <div>
                  <strong>Integrations</strong>
                  <p style="color: var(--text-muted); margin-top: 6px">Connect additional data sources to power your candidate intelligence.</p>
                </div>
                <div class="quick-actions">
                  <a href="./settings.html">Open integrations</a>
                </div>
                <div>
                  <strong>Theme</strong>
                  <p style="color: var(--text-muted); margin-top: 6px">The console adapts to your OS appearance. Dark mode is currently active.</p>
                </div>
              </div>
            </article>
          </section>
        </main>
      </section>
    </div>

    <script>
      const loginScreen = document.getElementById('loginScreen');
      const loginForm = document.getElementById('loginForm');
      const appLayout = document.getElementById('appLayout');
      const navButtons = Array.from(document.querySelectorAll('[data-view-target]'));
      const views = Array.from(document.querySelectorAll('.view'));
      const viewTitle = document.getElementById('viewTitle');
      const logoutButton = document.getElementById('logoutButton');
      const backendStatus = document.getElementById('backendStatus');
      const todayDate = document.getElementById('todayDate');

      const viewTitles = {
        dashboard: 'Dashboard overview',
        projects: 'Project portfolio',
        candidates: 'Candidate pipelines',
        positions: 'Open positions',
        'ai-sourcing': 'AI sourcing intelligence',
        settings: 'Workspace preferences'
      };

      const formatToday = () => {
        const now = new Date();
        return now.toLocaleDateString(undefined, {
          month: 'short',
          day: 'numeric'
        });
      };

      todayDate.textContent = formatToday();

      const setBackendStatus = (status) => {
        backendStatus.textContent = status;
      };

      if (window.electronAPI?.onBackendReady) {
        window.electronAPI.onBackendReady(({ url }) => {
          setBackendStatus('Connected');
          if (url) {
            backendStatus.textContent = `Connected to ${url}`;
          }
        });
      } else {
        setBackendStatus('Ready');
      }

      if (window.electronAPI?.onBackendExit) {
        window.electronAPI.onBackendExit(({ message }) => {
          setBackendStatus('Disconnected');
          window.alert(message || 'The backend stopped unexpectedly.');
        });
      }

      const showApp = () => {
        loginScreen.style.display = 'none';
        appLayout.setAttribute('data-state', 'visible');
      };

      const showLogin = () => {
        appLayout.removeAttribute('data-state');
        loginScreen.style.display = 'flex';
        loginForm.reset();
      };

      loginForm.addEventListener('submit', (event) => {
        event.preventDefault();
        const formData = new FormData(loginForm);
        const email = String(formData.get('email') || '').trim();
        const password = String(formData.get('password') || '').trim();
        if (!email || !password) {
          window.alert('Enter your work email and password to continue.');
          return;
        }
        showApp();
      });

      logoutButton.addEventListener('click', () => {
        showLogin();
      });

      const activateView = (viewName) => {
        navButtons.forEach((button) => {
          if (button.dataset.viewTarget === viewName) {
            button.classList.add('is-active');
            button.setAttribute('aria-current', 'page');
          } else {
            button.classList.remove('is-active');
            button.removeAttribute('aria-current');
          }
        });

        views.forEach((view) => {
          if (view.dataset.view === viewName) {
            view.setAttribute('data-state', 'active');
          } else {
            view.removeAttribute('data-state');
          }
        });

        viewTitle.textContent = viewTitles[viewName] || 'RecruitPro';
      };

      navButtons.forEach((button) => {
        button.addEventListener('click', () => {
          activateView(button.dataset.viewTarget);
        });
      });

      activateView('dashboard');
    </script>
  </body>
</html>
